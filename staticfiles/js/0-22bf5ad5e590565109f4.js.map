{"version":3,"sources":["webpack:///./src/js/views/photo/PhotoPage.vue?bcfb","webpack:///src/js/views/photo/PhotoPage.vue","webpack:///./src/js/views/photo/PhotoPage.vue?422e","webpack:///./src/js/views/photo/PhotoPage.vue","webpack:///./src/js/views/photo/PhotoPage.vue?c14e"],"names":["name","data","city_id","this","$route","params","photos_count","beforeRouteEnter","next","beforeRouteUpdate","cityId","parseInt","to","computed","watch","photoList","getPhotoList","city","id","activeCity","setActiveCity","mounted","getPhotoParams","methods","checkRout","$router","push","path","component","_vm","_h","$createElement","_c","_self","existsCities","length","staticClass","_v","_l","key","attrs","on","$event","preventDefault","_s","_e","photo","image_thumbnail"],"mappings":"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","file":"js/0-22bf5ad5e590565109f4.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.existsCities.length > 1)?_c('div',{staticClass:\"mb-5\"},[_c('h2',[_vm._v(\"Выберите город\")]),_vm._v(\" \"),(_vm.city_id)?_c('div',{staticClass:\"row\"},[_vm._l((_vm.existsCities),function(city){return _c('router-link',{key:(\"city_\" + (city.id)),staticClass:\"ml-3\",attrs:{\"to\":(\"/photo/city/\" + (city.id) + \"/\")},on:{\"click\":function($event){$event.preventDefault();return _vm.checkRout((\"/photo/city/\" + (city.id) + \"/\"))}}},[_vm._v(\"\\n        \"+_vm._s(city.name)+\"\\n      \")])}),_vm._v(\" \"),_c('router-view')],2):_c('div',{staticClass:\"row\"},_vm._l((_vm.existsCities),function(city){return _c('a',{key:(\"city_\" + (city.id)),staticClass:\"ml-3\",attrs:{\"href\":(\"/photo/city/\" + (city.id) + \"/\")},on:{\"click\":function($event){$event.preventDefault();return _vm.checkRout({ path: (\"/photo/city/\" + (city.id) + \"/\"), cityId: city.id })}}},[_vm._v(\"\\n        \"+_vm._s(city.name)+\"\\n      \")])}),0)]):_vm._e(),_vm._v(\" \"),(_vm.activeCity.id)?_c('div',{staticClass:\"row mb-4\"},[_c('h2',[_vm._v(\"Фотографии города \\\"\"+_vm._s(_vm.activeCity.name)+\"\\\"\")])]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"row\"},_vm._l((_vm.photoList),function(photo){return _c('div',{key:photo.id,staticClass:\"col-sm-12 col-md-6 col-lg-3 photo-bl\"},[_c('div',{staticClass:\"photo-bl-inner\"},[_c('div',{staticClass:\"img-bl\"},[_c('a',{attrs:{\"href\":\"#\"}},[_c('img',{attrs:{\"src\":photo.image_thumbnail,\"alt\":\"\"}})])])])])}),0)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div\n      v-if=\"existsCities.length > 1\"\n      class=\"mb-5\"\n    >\n      <h2>Выберите город</h2>\n      <div\n        v-if=\"city_id\"\n        class=\"row\"\n      >\n        <router-link\n          v-for=\"city in existsCities\"\n          :key=\"`city_${city.id}`\"\n          :to=\"`/photo/city/${city.id}/`\"\n          class=\"ml-3\"\n          @click.prevent=\"checkRout(`/photo/city/${city.id}/`)\"\n        >\n          {{ city.name }}\n        </router-link>\n        <router-view></router-view>\n      </div>\n      <div\n        v-else\n        class=\"row\"\n      >\n        <a\n          v-for=\"city in existsCities\"\n          :key=\"`city_${city.id}`\"\n          :href=\"`/photo/city/${city.id}/`\"\n          class=\"ml-3\"\n          @click.prevent=\"checkRout({ path: `/photo/city/${city.id}/`, cityId: city.id })\"\n        >\n          {{ city.name }}\n        </a>\n      </div>\n    </div>\n    <div\n      v-if=\"activeCity.id\"\n      class=\"row mb-4\"\n    >\n      <h2>Фотографии города \"{{ activeCity.name }}\"</h2>\n    </div>\n    <div class=\"row\">\n      <div\n        v-for=\"photo in photoList\"\n        :key=\"photo.id\"\n        class=\"col-sm-12 col-md-6 col-lg-3 photo-bl\"\n      >\n        <div class=\"photo-bl-inner\">\n          <div class=\"img-bl\">\n            <a href=\"#\">\n                <img\n                  :src=\"photo.image_thumbnail\"\n                  alt=\"\"\n                >\n            </a>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n\nimport { mapState, mapMutations, mapActions } from 'vuex';\n\nexport default {\n  name: 'PhotoPage',\n  data() {\n    return {\n      city_id: this.$route.params.city_id,\n      photos_count: 5,\n    };\n  },\n  beforeRouteEnter(to, from, next) {\n    // if (to.params.city_id && from.path === '/photo/') {\n    // }\n    next();\n  },\n  beforeRouteUpdate(to, from, next) {\n    let cityId = null;\n    try {\n      cityId = parseInt(to.params.city_id, 10);\n    } catch (e) {\n      cityId = null;\n    }\n    if (cityId) {\n      this.city_id = cityId;\n      next();\n    }\n  },\n  computed: {\n    ...mapState('photoPage', [\n      'photoList', 'existsCities', 'activeCity', 'photoPagination',\n    ]),\n  },\n  watch: {\n    photoList() {\n    },\n    city_id() {\n      this.getPhotoList({ page: this.photoPagination.currentPage, city: this.city_id });\n      const activeCity = this.existsCities.find((city) => {\n        if (city.id === this.city_id) {\n          return city;\n        }\n        return false;\n      });\n      if (activeCity) {\n        this.setActiveCity(activeCity);\n      }\n    },\n  },\n  mounted() {\n    if (this.city_id) {\n      this.getPhotoList({ page: this.photoPagination.currentPage, city: this.city_id });\n    } else {\n      this.getPhotoList({ page: this.photoPagination.currentPage });\n    }\n    this.getPhotoParams();\n  },\n  methods: {\n    ...mapActions('photoPage', [\n      'getPhotoList', 'getPhotoParams',\n    ]),\n    ...mapMutations('photoPage', ['setActiveCity',\n    ]),\n    checkRout(data) {\n      const { path, cityId } = data;\n      this.city_id = cityId;\n      this.$router.push(path);\n    },\n  },\n};\n</script>\n\n<style scoped>\n  .photo-bl {\n    padding: 8px;\n  }\n  .photo-bl-inner {\n    padding: 6px;\n    border: 1px solid #b5b5b5;\n  }\n  .img-bl {\n    width: 100%;\n    overflow: hidden;\n  }\n  .img-bl img {\n    width: 100%;\n  }\n</style>\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PhotoPage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PhotoPage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PhotoPage.vue?vue&type=template&id=d4b6412e&scoped=true&\"\nimport script from \"./PhotoPage.vue?vue&type=script&lang=js&\"\nexport * from \"./PhotoPage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PhotoPage.vue?vue&type=style&index=0&id=d4b6412e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d4b6412e\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/index.js??ref--3-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/lib/index.js??postcss!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PhotoPage.vue?vue&type=style&index=0&id=d4b6412e&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/index.js??ref--3-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/lib/index.js??postcss!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PhotoPage.vue?vue&type=style&index=0&id=d4b6412e&scoped=true&lang=css&\""],"sourceRoot":""}